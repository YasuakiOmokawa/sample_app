<script type="text/javascript">


// 日付計算
var calc = function(datestr, p, day) {
  var dt = new Date(datestr);
  switch(p) {
    case '+' :
    dt.setDate(dt.getDate() + day);
    break;
    case '-' :
    dt.setDate(dt.getDate() - day);
    break;
  }
  return dt;
}

// 日付フォーマット
var fmt = function(dt) {
  var year = dt.getFullYear();
  var month = dt.getMonth() + 1;
  var day = dt.getDate();

  if ( month < 10 ) {
  　　month = '0' + month;
  }
  if ( day < 10 ) {
  　　day = '0' + day;
  }
  var str = year + '-' + month + '-' + day;
  return str;
}

$(function() {

  $( "#fromd" ).datepicker({
    changeMonth: true,
    changeYear: true,
    numberOfMonths: 3,
    dateFormat:"yy-mm-dd",
    onSelect: function( selectedDate ) {
      console.log(selectedDate);
      var dte = calc(selectedDate, '+', 31);
      var opt = fmt(dte);
      console.log(opt);
      $( "#from" ).val(selectedDate);
      $( "#tod" ).datepicker( "option", "minDate", selectedDate );
      $( "#tod" ).datepicker( "option", "maxDate", opt );
    }
  });
  $( "#tod" ).datepicker({
    changeMonth: true,
    changeYear: true,
    numberOfMonths: 3,
    dateFormat:"yy-mm-dd",
    onSelect: function( selectedDate ) {
      console.log(selectedDate);
      var dte = calc(selectedDate, '-', 31);
      var opt = fmt(dte);
      console.log(opt);
      $( "#to" ).val(selectedDate);
      $( "#fromd" ).datepicker( "option", "minDate", opt );
      $( "#fromd" ).datepicker( "option", "maxDate", selectedDate );
    }
  });
});
</script>
